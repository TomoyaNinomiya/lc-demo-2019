<!DOCTYPE html>
<html class="is-archiveFigureCovered" lang="zh-cn">
  <head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <script src="/assets/js/lib.js"></script>
    <script src="/assets/js/common.js"></script>
    <link rel="stylesheet" href="/assets/css/style.css"/>
    <title>小熊夏季新款女装可爱卡通短袖t恤宽松韩版半袖 | LC E-SHOP</title>
  </head>
  <body class="lc-root"><a id="top"></a>
    <header class="l-header">
      <nav class="l-navi only-sp">
        <ul class="l-navi__list">
          <li class="l-navi__item">
            <button class="l-navi__button js-lc--openModal" aria-controls="modalLangCurrency" aria-haspopup="true"><i class="l-navi__icon lc-icon--globe"></i><span class="l-navi__label">简体中文 / CNY</span></button>
          </li>
        </ul>
      </nav>
      <nav class="l-navi">
        <ul class="l-navi__list">
          <li class="l-navi__item only-pc">
            <button class="l-navi__button js-lc--openModal" type="button" aria-controls="modalLangCurrency" aria-haspopup="true"><i class="l-navi__icon lc-icon--globe"></i><span class="l-navi__label">简体中文 / CNY</span></button>
          </li>
          <li class="l-navi__item"><a class="l-navi__button" href="/auth/login/"><i class="l-navi__icon lc-icon--user"></i><span class="l-navi__label">登入</span></a>
          </li>
        </ul>
      </nav>
    </header>
    <div class="lc-modal" id="modalLangCurrency">
      <div class="lc-modal__bg js-lc--closeModal"></div>
      <div class="lc-modal__body">
        <h3 class="lc-modal__title">语言・币种设置</h3>
        <dl class="lc-selectModalSettings">
          <div class="lc-selectModalSettings__item">
            <dt class="lc-selectModalSettings__label">语言</dt>
            <dd class="lc-selectModalSettings__detail">
              <div class="lc-selectBox">
                <select class="lc-selectBox__select js-lc--selectLanguage">
                  <option value="1">簡体中文</option>
                </select>
              </div>
            </dd>
          </div>
          <div class="lc-selectModalSettings__item">
            <dt class="lc-selectModalSettings__label">币种</dt>
            <dd class="lc-selectModalSettings__detail">
              <div class="lc-selectBox">
                <select class="lc-selectBox__select js-lc--selectCurrency">
                  <option value="1">CNY</option>
                </select>
              </div>
            </dd>
          </div>
        </dl>
        <p class="lc-modal__buttons">
          <button class="lc-button--submit js-lc--changeLangCurrency" type="button"><span class="lc-button__label">保存更改</span><i class="lc-button__icon lc-icon--check"></i></button>
          <button class="lc-button--cancel js-lc--closeModal" type="button"><i class="lc-button__icon lc-icon--close"></i><span class="lc-button__label">取消</span></button>
        </p>
      </div>
      <script>
        $(function () {
          $('.js-lc--changeLangCurrency').on('click', function () {
            var language = $('.js-lc--selectLanguage').val();
            var currency = $('.js-lc--selectCurrency').val();
            location.reload();
          })
        });
      </script>
    </div>
    <main class="l-main">
      <article>
        <div class="productMainSection">
          <header class="productMainSection__header">
            <h1 class="productMainSection__title">小熊夏季新款女装可爱卡通短袖t恤宽松韩版半袖</h1>
            <p class="productMainSection__code">BSW00352-H</p>
          </header>
          <figure class="productImages">
            <ul class="productImages__main">
              <li class="productImages__main__item"><a class="productImages__main__inner" href="/assets/img/img_product_01.jpg" target="_blank"><img src="/assets/img/img_product_01.jpg" alt="product title"/></a></li>
              <li class="productImages__main__item"><a class="productImages__main__inner" href="/assets/img/img_product_02.jpg" target="_blank"><img src="/assets/img/img_product_02.jpg" alt="product title"/></a></li>
              <li class="productImages__main__item"><a class="productImages__main__inner" href="/assets/img/img_product_03.jpg" target="_blank"><img src="/assets/img/img_product_03.jpg" alt="product title"/></a></li>
              <li class="productImages__main__item"><a class="productImages__main__inner" href="/assets/img/img_product_04.jpg" target="_blank"><img src="/assets/img/img_product_04.jpg" alt="product title"/></a></li>
              <li class="productImages__main__item"><a class="productImages__main__inner" href="/assets/img/img_product_05.jpg" target="_blank"><img src="/assets/img/img_product_05.jpg" alt="product title"/></a></li>
              <li class="productImages__main__item"><a class="productImages__main__inner" href="/assets/img/img_product_06.jpg" target="_blank"><img src="/assets/img/img_product_06.jpg" alt="product title"/></a></li>
              <li class="productImages__main__item"><a class="productImages__main__inner" href="/assets/img/img_product_07.jpg" target="_blank"><img src="/assets/img/img_product_07.jpg" alt="product title"/></a></li>
              <li class="productImages__main__item"><a class="productImages__main__inner" href="/assets/img/img_product_08.jpg" target="_blank"><img src="/assets/img/img_product_08.jpg" alt="product title"/></a></li>
            </ul>
            <div class="productImages__thumbnails">
              <ul class="productImages__thumbnails__list">
                <li class="productImages__thumbnails__item" data-index="0"><img src="/assets/img/img_product_01.jpg" alt="product title"/></li>
                <li class="productImages__thumbnails__item" data-index="1"><img src="/assets/img/img_product_02.jpg" alt="product title"/></li>
                <li class="productImages__thumbnails__item" data-index="2"><img src="/assets/img/img_product_03.jpg" alt="product title"/></li>
                <li class="productImages__thumbnails__item" data-index="3"><img src="/assets/img/img_product_04.jpg" alt="product title"/></li>
                <li class="productImages__thumbnails__item" data-index="4"><img src="/assets/img/img_product_05.jpg" alt="product title"/></li>
                <li class="productImages__thumbnails__item" data-index="5"><img src="/assets/img/img_product_06.jpg" alt="product title"/></li>
                <li class="productImages__thumbnails__item" data-index="6"><img src="/assets/img/img_product_07.jpg" alt="product title"/></li>
                <li class="productImages__thumbnails__item" data-index="7"><img src="/assets/img/img_product_08.jpg" alt="product title"/></li>
              </ul>
            </div>
          </figure>
          <p class="productMainSection__price"><em><span class="js-lc--price">159.00</span>CNY</em><small>(<span class="js-lc--basePrice">2,393</span>JPY)</small></p>
          <div class="cartInArea">
            <script>
              /**
                * -------------------------------
                * SKUの処理
                */
              $(function () {
                /**
                  * @type {Number} - 通貨レート
                  */
                var curRatio = 0.067;
              
                /**
                  * @type {Number} - 選択可能な最大数量
                  */
                var quantityMax = 10;
              
                /**
                  * @type {Object} - 価格を表示している要素のjQueryオブジェクトをまとめたもの
                  */
                var $displayPrice = {
                  price: $('.js-lc--price'),
                  basePrice: $('.js-lc--basePrice')
                }
              
                /**
                  * @type {Object} - SKU、quantity、product_sku_idの要素のjQueryオブジェクトをまとめたもの
                  */
                var $form = {
                  sku1: $('.js-lc--sku1'),
                  sku2: $('.js-lc--sku2'),
                  quantity: $('[name="quantity"]'),
                  product_sku_id: $('input[name="product_sku_id"]'),
                  cartin: $('.js-lc--cartin')
                }
              
                /**
                  * @type {Boolean} - この商品におけるSKU1、SKU2の存在
                  */
                var hasSku1 = $form.sku1.length ? true : false;
                var hasSku2 = $form.sku2.length ? true : false;
              
                if (hasSku1 || hasSku2) {
                  // SKUが変更されたときとページが表示されたタイミングで情報を更新
                  $form.sku1.on('click', updateSkuState);
                  $form.sku2.on('click', updateSkuState);
                  window.addEventListener('pageshow', function() {
                    updateSkuState();
                  });
              
                  /**
                    * 選択されている SKU の組み合わせから価格や SKU の disabled を更新
                    */
                  function updateSkuState () {
                    var selectedSku = {};
                    if (hasSku1 && hasSku2) {
                      var sku1Value = $form.sku1.filter(':checked').val();
                      var sku2Value = $form.sku2.filter(':checked').val();
                      for (var i = 0; i < productSkus.length; i++) {
                        if (productSkus[i].sku1 === sku1Value && productSkus[i].sku2 === sku2Value) {
                          selectedSku = productSkus[i];
                        }
                        if (productSkus[i].sku1 === sku1Value || productSkus[i].sku2 === sku2Value) {
                          if (!productSkus[i].stock) {
                            $form.sku1.filter('[value="' + productSkus[i].sku1 + '"]').not(':checked').prop('disabled', true);
                            $form.sku2.filter('[value="' + productSkus[i].sku2 + '"]').not(':checked').prop('disabled', true);
                          } else {
                            $form.sku1.filter('[value="' + productSkus[i].sku1 + '"]').not(':checked').prop('disabled', false);
                            $form.sku2.filter('[value="' + productSkus[i].sku2 + '"]').not(':checked').prop('disabled', false);
                          }
                        }
                      }
                    } else if (hasSku1 || hasSku2) {
                      var skuValue = hasSku1 ? $form.sku1.filter(':checked').val() : $form.sku2.filter(':checked').val();
                      if (!skuValue) {
                        skuValue = false;
                      }
                      for (var i = 0; i < productSkus.length; i++) {
                        if (productSkus[i].sku1 === skuValue || productSkus[i].sku2 === skuValue) {
                          selectedSku = productSkus[i];
                        } else {
                          if (!productSkus[i].stock) {
                            $form.sku1.filter('[value="' + productSkus[i].sku1 + '"]').prop('disabled', true);
                            $form.sku2.filter('[value="' + productSkus[i].sku2 + '"]').prop('disabled', true);
                          } else {
                            $form.sku1.filter('[value="' + productSkus[i].sku1 + '"]').prop('disabled', false);
                            $form.sku2.filter('[value="' + productSkus[i].sku2 + '"]').prop('disabled', false);
                          }
                        }
                      }
                    }
              
                    $form.product_sku_id.val(selectedSku.id);
              
                    if ((hasSku1 && $form.sku1.filter(':checked').length === 0) || (hasSku2 && $form.sku2.filter(':checked').length === 0)) {
                      $form.cartin.addClass('is-disabled');
                      $displayPrice.price.text(price_format(curRatio * productSkus[0].basePrice));
                      $displayPrice.basePrice.text(number_format(productSkus[0].basePrice));
                      $form.quantity.find('option')
                        .show()
                        .prop('disabled', false);
                    } else {
                      $form.cartin.removeClass('is-disabled');
                      $displayPrice.price.text(price_format(curRatio * selectedSku.basePrice));
                      $displayPrice.basePrice.text(number_format(selectedSku.basePrice));
                      $form.quantity.find('option')
                        .show()
                        .prop('disabled', false);
                      $form.quantity.find('option:gt(' + (selectedSku.stock - 1) + ')')
                        .hide()
                        .prop('disabled', true)
                        .prop('selected', false);
                    }
                  }
              
                  // SKUが選択されていないときにカートインボタンが押されたらアラートを返す
                  $form.cartin.on('click', function () {
                    if ($(this).hasClass('is-disabled')) {
                      var message = '请选择 %SKU%';
                      if (hasSku1 && hasSku2) {
                        message = message.replace('%SKU%', '"' + skuLabels.sku1 + '", "' + skuLabels.sku2 + '"');
                      } else {
                        message = message.replace('%SKU%', '"' + (hasSku1 ? skuLabels.sku1 : skuLabels.sku2) + '"');
                      }
                      alert(message);
                      return false;
                    }
                  });
                }
              });
              
              /**
                * 数値を小数点固定の価格表記へ変換
                * @param {Number} num - 変換したい数値
                */
              function price_format(num) {
                return number_format(parseFloat(num).toFixed(2));
              }
              
              /**
                * 数値をカンマつきの数値表記へ変換
                * @param {Number} num - 変換したい数値
                */
              function number_format (num) {
                var parts = num.toString().split('.');
                parts[0] = parts[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g, '$1,');
                return parts.join('.');
              }
            </script>
            <form action="" method="post">
              <input type="hidden" name="product_sku_id"/>
              <dl class="skuList">
                <div class="skuList__item">
                  <dt class="skuList__label">数量</dt>
                  <dd class="skuList__detail">
                    <div class="lc-selectBox">
                      <select class="lc-selectBox__select" name="quantity">
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                        <option value="9">9</option>
                        <option value="10">10</option>
                      </select>
                    </div>
                  </dd>
                </div>
              </dl>
              <p class="cartInArea__actions">
                <button class="lc-button--submit lc-button--action js-lc--cartin" type="submit"><span class="lc-button__label">加入购物车</span><i class="lc-button__icon lc-icon--cart"></i></button>
                <button class="lc-button--submit lc-button--onlyIcon js-lc--favorite" type="button" title="我的最爱"><span class="lc-button__label">我的最爱</span><i class="lc-button__icon lc-icon--heart"></i></button>
              </p>
              <dl class="additionsForm">
                <dt class="additionsForm__title lc-icon--plus">OPTIONS</dt>
                <dd class="additionsForm__item">
                  <label class="additionsForm__label">
                    <input class="additionsForm__input" type="checkbox" name="addition_quantity[1]" value="1"/>
                    <div class="additionsForm__box">
                      <p class="additionsForm__name"><i class="additionsForm__checkbox"></i>礼品包装</p>
                      <p class="additionsForm__price"><em>0.00CNY</em><small>(0JPY)</small></p>
                      <p class="additionsForm__detail">推荐用于礼品和纪念品</p>
                    </div>
                  </label>
                </dd>
                <dd class="additionsForm__item">
                  <label class="additionsForm__label">
                    <input class="additionsForm__input" type="checkbox" name="addition_quantity[2]" value="1"/>
                    <div class="additionsForm__box">
                      <p class="additionsForm__name"><i class="additionsForm__checkbox"></i>快点航班</p>
                      <p class="additionsForm__price"><em>1.00CNY</em><small>(15JPY)</small></p>
                      <p class="additionsForm__detail">船舶的优先级高于平时</p>
                    </div>
                  </label>
                </dd>
              </dl>
            </form>
          </div>
        </div>
      </article>
    </main>
    <footer class="l-footer">
      <p class="l-footer__pagetop"><a class="js-scroll" href="#top"><span class="l-footer__pagetop__icon"></span></a></p>
      <p class="l-footer__copyright"><small>&copy; 2019 Sterfield Co., Ltd.</small></p>
    </footer>
    <script>
      $(function () {
        var $window = $(window);
      
        //==========================================================
        // Modal
        //==========================================================
        $('.js-lc--openModal').on('click', function() {
          var $trigger = $(this);
          $('#' + $trigger.attr('aria-controls')).addClass('is-active');
          $('#' + $trigger.attr('aria-controls')).find('.lc-modal__body').css({
            top: ($window.scrollTop() + 60) + 'px'
          });
          return false;
        })
        $('.js-lc--closeModal').on('click', function () {
          $('.lc-modal').removeClass('is-active');
        })
      
        //==========================================================
        // Tab
        //==========================================================
        if ($('.lc-tab[role="application"]').length) {
          $('.lc-tab[role="application"]').each(function () {
            var $wrapper = $(this);
            var $tab = $wrapper.find('.lc-tab__tab');
            var $tabPanel = $wrapper.find('.lc-tab__panel');
            $tab.on('click', function () {
              var $currentTab = $(this);
              $tab.removeClass('is-active');
              $tabPanel.removeClass('is-active');
              $currentTab.addClass('is-active');
              $('#' + $currentTab.attr('aria-controls')).addClass('is-active');
            })
          })
        }
      
        //==========================================================
        // Forms
        //==========================================================
        var $form__items = $('.lc-form__item');
        if ($form__items.length) {
          $form__items.each(function (index, form__item) {
            var $form__item = $(form__item);
            var $label = $form__item.find('.lc-form__label');
            var $input = $form__item.find('input, select, textarea');
            $label.filter(':has(.error)').addClass('is-errored');
            $input.on('focus', function () {
              $label.addClass('is-focused');
            }).on('blur', function () {
              $label.removeClass('is-focused');
            })
          })
        }
      });
    </script>
  </body>
</html>